:PROPERTIES:
:ID:       acacc38e-de05-42bd-add9-e2c547a3b518
:END:
#+title: unity-shader
#+date: [2024-08-01 周四]
#+last_modified:  

Unity Contain 4 Shade Pipeline
- Builtin(default)
- [[id:bab164c0-dde4-4158-82e3-63e0ef2b01bd][URP]]
- [[id:e5b96b69-3296-455f-9703-b68018f07ddb][HDRP]](For Nice machine)
- [[id:ef9746e4-5274-47bc-901a-8820727ac777][SRP]]
there is no compat, only one of them can be used in a project.

|-----------------+---------------------------|
| Point           | Note                      |
|-----------------+---------------------------|
| basic structure | shader "<path in editor>" |
|-----------------+---------------------------|
#+BEGIN_SRC C :noweb yes
Shader "<Path in editor>"
{
  Properties
  {
    <fields of shader entry>
  }

  Subshader
  {
    Pass
    {
      <Render Logic>
    }

  }

  Subshader
  {
    # compat version
  }
  
  Fallback "Duffuse"
}
#+END_SRC
|---------------------------+-------------------------------------------------------------------------------------------|
| Property Definition       | _<Prop variable Name>("displa name",type) = <default value>{}                             |
|                           | the same name of varialbe in pass will automaticly be assigned with the value of property |
|---------------------------+-------------------------------------------------------------------------------------------|
| property type             | see [[id:6bf94761-cde3-4fd9-a8de-2051bfc78c29][unity-shader-lang-type]]                                                                               |
|---------------------------+-------------------------------------------------------------------------------------------|
| builtin 2D property value | - "white"                                                                                 |
|                           | - "black"                                                                                 |
|                           | - "gray"                                                                                  |
|                           | - "bump" : for normal texture                                                             |
|---------------------------+-------------------------------------------------------------------------------------------|
|                           |                                                                                           |
|---------------------------+-------------------------------------------------------------------------------------------|
| Subshader structure       |                                                                                           |
|---------------------------+-------------------------------------------------------------------------------------------|
#+BEGIN_SRC  C :noweb yes
SubShader
{
  Tags {"k"="v" "k1"="v1" ...}

  <global render status>

  pass
  {
    <standlone render status>
    <fill buffer>
  }

  pass
  {
    <override buffer with new pixels>
  }
}
#+END_SRC
|------------------------------------------+------------------------------------------------------------|
| <<Render Status>>                        |                                                            |
|------------------------------------------+------------------------------------------------------------|
| Queue                                    | a int value to decide order to render                      |
|                                          | - Background : 1000 for background and skybox              |
|                                          | - Geometry   : 2000 for object that is no transparent      |
|                                          | - AlphaTest  : 2450 ??                                     |
|                                          | - Transperant:3000  for transparent object                 |
|                                          | - Overlay    : 4000 for effect                             |
|                                          |                                                            |
|                                          | - other custom value                                       |
|                                          | - using expression to compute value, eg. "Geometry+1"      |
|------------------------------------------+------------------------------------------------------------|
| RenderType                               |                                                            |
|------------------------------------------+------------------------------------------------------------|
| DisabeBatching                           |                                                            |
|------------------------------------------+------------------------------------------------------------|
| ForceNoShadowCasting                     |                                                            |
|------------------------------------------+------------------------------------------------------------|
| IgnoreProjector                          |                                                            |
|------------------------------------------+------------------------------------------------------------|
|                                          | <<Render Status usually applied to Pass>>                  |
|------------------------------------------+------------------------------------------------------------|
| Cull                                     |                                                            |
|------------------------------------------+------------------------------------------------------------|
| ZTest                                    |                                                            |
|------------------------------------------+------------------------------------------------------------|
| ZWrite                                   |                                                            |
|------------------------------------------+------------------------------------------------------------|
| Blend                                    |                                                            |
|------------------------------------------+------------------------------------------------------------|
| ColorMask                                |                                                            |
|------------------------------------------+------------------------------------------------------------|
|                                          |                                                            |
|------------------------------------------+------------------------------------------------------------|
| Fallback                                 | means replacement if machine cannot support this subshader |
|                                          | usually "Diffuse"                                          |
|------------------------------------------+------------------------------------------------------------|
|                                          |                                                            |
|------------------------------------------+------------------------------------------------------------|
| <<Compiling Instructions>>               |                                                            |
|------------------------------------------+------------------------------------------------------------|
| #program vertex <vertex fnname>          | spec vertex shader name                                    |
|------------------------------------------+------------------------------------------------------------|
| #program fragment <fragment fnname>      | spec fragment shader name                                  |
|------------------------------------------+------------------------------------------------------------|
| #program target <int>                    | spec compat level(default 2.5)                             |
|------------------------------------------+------------------------------------------------------------|
| #program require <hard feature>          | require a spec function povided by lower level CG API      |
|------------------------------------------+------------------------------------------------------------|
| #program only_renders <target CG API>    | spec which CG API want to render or not want to            |
| #program exclde_renders <tartget CG API> | - d3dll                                                    |
|                                          | - glcore, gles. gles3                                      |
|                                          | - metal                                                    |
|                                          | - vulkan                                                   |
|                                          | - xboxone                                                  |
|                                          | - wiiu                                                     |
|                                          | - ps4                                                      |
|------------------------------------------+------------------------------------------------------------|
| #include                                 |                                                            |
|------------------------------------------+------------------------------------------------------------|
