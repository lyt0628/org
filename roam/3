:PROPERTIES:
:ID:       d5185494-b7e1-411c-9944-8dd14dd542c4
:END:
#+title: git-ghact
#+date: [2024-10-10 周四]
#+last_modified:  





| Point | Note                                                                    |
|-------+-------------------------------------------------------------------------|
| Steps | the basic unit of execution, mybe a uses: caluse or a shell command     |
|       | eg. - uses: actions/checkout@v3, lh the repo, rh @v3 is tag of the repo |
|-------+-------------------------------------------------------------------------|
| Jobs  | A series of Steps Join as a Job, eg. Build,Test, Deployment             |
|-------+-------------------------------------------------------------------------|
|       |                                                                         |
|-------+-------------------------------------------------------------------------|





|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| Caluse                | Phase            | Value                                   | Function                                                                                                      | Note |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| steps                 | job              |                                         | begin steps block                                                                                             |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| uses                  | step             | <repo>@<tag>                            | use 3rd repo(called as action) as a step                                                                      |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| name                  | step             |                                         | spec name of this step                                                                                        |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| with                  | step             | sub-list                                | provide arguments for 3rd actions                                                                             |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| run                   | step             | a single shell command                  |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| jobs                  | top level        |                                         | begin job blocks                                                                                              |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| runs-on               | top level or job | windows-latest                          | spec the Platform that runner is running                                                                      |      |
|                       |                  | ubuntu-latest                           |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| name                  | top level        |                                         | spec the name of the workflow                                                                                 |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| on                    | top level        |                                         | spec when to trig this workflow                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| on.<git op>           |                  | <git op>:                               | spec the operation to trig this workflow                                                                      |      |
|                       |                  | push, pull_request                      |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| on.<git op>.branches  |                  | list of branches                        | spec the target branch that this workflow focus on                                                            |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| workflow_dispatch     | empty            | enable action be call in UI actions tab |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| env                   | top level        |                                         |                                                                                                               |      |
|                       | jobs level       |                                         |                                                                                                               |      |
|                       | steps level      |                                         |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| if                    | step             | bool expression                         |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| run.shell             |                  |                                         | spec shell to execute command                                                                                 |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| run.working-directory |                  | pwd                                     |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| defaults              | top level        | list of key-value                       | spec default value for any key                                                                                |      |
|                       | job level        |                                         |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| permissions           | top level        | list of scope permissions kv            | spec permission of workflow. See: [[id:d54b8566-290e-4a05-a661-dea11f80e119][git-ghact-perm]]                                                              |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| needs                 | job              | list of job that this job depenent on   |                                                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| envrionment.name      | job              |                                         | spec the envronment of workflow                                                                               |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
| environment.url       | job              | spec target URL this deployment for     | https://github.com/${{ github.repository }}/releases/tag/v${{ vars.DEV_VERSION }} For sematic verison release |      |
|-----------------------+------------------+-----------------------------------------+---------------------------------------------------------------------------------------------------------------+------|
