:PROPERTIES:
:ID:       71328aa2-1ac2-48b8-a55b-5aa971200b0c
:header-args:C++: :noweb yes :dir workdir :results silent
:END:
#+title: gl-FuncSummary
#+date: [2024-05-26 日]
#+last_modified: [2024-05-27 一 00:35]


* GL函数命名规则

- 表示参数的函数后缀
  

* Shader 的编译链接

| 函数名称             | 函数说明                                            | 参数             | 参数说明                                               | 示例 |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glCreateShader     | 创建Shader实例                                      | GL_enum type    | 表示Shader类型的枚举常量                                 |     |
|                    |                                                   |                 | GL_VERTEX_SHADER 顶点着色器                            |     |
|                    |                                                   |                 | GL_FRAGMENT_SHADER 片元着色器                          |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glShaderSource     | 传递着色器代码给Shader实例                            | GLuint shader   | glCreateShader创建Shader时返回的句柄                     |     |
|                    |                                                   | GLuint size     | 1                                                    |     |
|                    |                                                   | char* src       | GLSL 代码字符串                                        |     |
|                    |                                                   |                 | NULL                                                 |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glCompileShader    | 编译Shader中的GLSL代码，生成二进制代码                  | GLuint          | glCreateShader创建Shader时返回的句柄                     |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glCreateProgram    | 创建空的渲染管线程序                                  |                 |                                                      |     |
|                    | 返回表示程序的GLuint类型句柄                           |                 |                                                      |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glAttachShader     | 为指定渲染程序附加Shader                              | GLuint prog     | 渲染程序句柄                                            |     |
|                    |                                                   | GLuint shader   | Shader句柄                                            |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| GLLinkProgram      | 编序渲染程序中的Shader，生成可执行二进制代码              | GLuint prog     | 渲染程序句柄                                            |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glGetError         | 从GL的错误信息数组中取出一条错误信息，并将游标向前移动一位    |                 |                                                      |     |
|                    | ->  int glerr                                     |                 |                                                      |     |
|                    | GL_NO_ERROR 没有异常发生                             |                 |                                                      |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glGetShaderiv      | 从GL 获取整数数组, 值结果参数。这里 用于获取编译错误信息长度 | GLuint shader   | 句柄                                                  |     |
|                    |                                                   | GLenum  info    | 获取信息的枚举   GL_INFO_LOG_LENGTH 表示获取编译错误信息长度 |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glGetShaderInfoLog | 获取编译错误信息字符串                                 | GLuint shader   |                                                      |     |
|                    |                                                   | int len         |                                                      |     |
|                    |                                                   | int* word_count |                                                      |     |
|                    |                                                   | char* msg       |                                                      |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glDeleteShader     |                                                   |                 |                                                      |     |
|                    |                                                   |                 |                                                      |     |
|--------------------+---------------------------------------------------+-----------------+------------------------------------------------------+-----|
| glDeleteProgram    |                                                   |                 |                                                      |     |



* 背景

| 函数名称             | 函数说明                   | 参数              | 参数说明                                                          | 示例                  |
|--------------------+--------------------------+------------------+-----------------------------------------------------------------+----------------------|
| glClearBufferfv    | 用指定的值清空指定GL内置缓冲区 | GLenum buffer    | GL 内置缓冲区的ID， GL_COLOR 表示颜色缓冲区。在最开始调用等同于绘制背景颜色 | <<clear_background>> |
| (buffer=GL_COLOR时) |                          | GLint drawBuffer | 0                                                               |                      |
|                    |                          | GLfloat *value   | 具体的格式取决于对应缓冲区的解释，GL_COLOR 需要 RGBA 四个通道的浮点数数组   |                      |
|--------------------+--------------------------+------------------+-----------------------------------------------------------------+----------------------|
|                    |                          |                  |                                                                 |                      |

* VertexArrayObject

* Buffer存储

* 关联 VAO 和 VBO


* 绘制指令


** 直接绘制

** 索引绘制

** 调整


* 纹理 绘制



* GL配置




* GLSL 内置函数






* 使用示例





**  clear_background

#+HEADER: :flags "$(pkg-config --cflags glfw3  gl glx x11 xrandr xi xxf86vm  glew glu) -I./deps/sb7/include" 
#+HEADER: :libs "$(pkg-config --libs glfw3  gl glx x11 xrandr xi xxf86vm  glew glu) "
#+BEGIN_SRC C++ 
  <<gl-head>>

  void init(GLFWwindow* window) {}

  void display(GLFWwindow* window, double currentTime)
  {
    static const GLfloat red[] = {1.0f, 0.0f, 0.0f, 1.0f};
    glClearBufferfv(GL_COLOR, 0, red);
  }

  <<gl-loop>>
#+END_SRC


