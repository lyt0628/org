:PROPERTIES:
:ID:       4a42e38a-752c-417e-8272-2daa8333a7bd
:END:
#+title: unity-shader-lib-cginc-util
#+date: [2024-10-15 周二]
#+last_modified:  

|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| Fn                                      | Params        | Ret                         | Note                                           |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| <<Coord Transform Fn>>                  |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityObjectToClipPos()                  | pos:f3=>f3    |                             | transform pos to clip coord                    |
|                                         |               |                             | that is mul(UNITY_MATRIX_MVP, float4(pos).xyz) |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityObjectToViewPos()                  | pos:f3=>f4    |                             | transform pos to view coord                    |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityWorldToViewPos()                   | pos:f3=>f3    |                             | that is mul(UNITY_MATRIX_V, float4(pos).xyz)   |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityWorldToClipPos()                   | pos:f3=>f4    |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityViewToClipPos()                    | pos:f3=>f4    |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
|                                         |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityObjectToWorldDir()                 | dir:f3=>f3    |                             | ModelSpace 2 WorldSpace, normalized            |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityWorldToObjectDir()                 | dir:f3=>f3    |                             | WorldSpace 2 ModelSpace, normalized            |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityObjectToWorldNormal()              | norm:f3=>f3   |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
|                                         |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| <<Light Utill In Foreward Render Path>> |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| WorldSpaceLightDir()                    | wldPos:f3=>f3 | vec:Light0=>Pos, WorldSpace |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| ObjSpaceLightDir()                      | v:f4=>f3      | vec:Light0=>v, ModelSpace   |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| Shader4PointLights                      | ??            |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| <<View Util>>                           |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnityWorldSpaceView()                   | v:f3=>f3      | vec: v=>cam, WorldSpace     |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| ObjSapceViewDir()                       | v:f4=>f3      | vec: v=>cam, WorldSpace     |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
|                                         |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| <<Tex Util>>                            |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| TRANSFORM_TEX()                         | tex:          | uv:fix2                     | (tex.xy * name##_ST + name##_ST.zw)            |
|                                         | name:str      |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| UnpackNormal()                          | fix3=>fix3    |                             | [0,1]=>[-1,1]                                  |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| Luminance()                             | rgb:half      | gray:half                   |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| ComputeScreenPos()                      | pos:f4=>f4    |                             | pos(clip)=> uv(screen)                         |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| ComputeGrabScreenPos()                  | pos:f4=>f4    |                             | v(clip)=>uv(grabPass)                          |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
|                                         |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| <<Math Util>>                           |               |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| step()                                  | Edge:float    |                             |                                                |
|                                         | v:float       | return v>Edge?1:0           |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|
| lerp()                                  | a,b:float     |                             |                                                |
|                                         | t:[0,1]       |                             |                                                |
|-----------------------------------------+---------------+-----------------------------+------------------------------------------------|

